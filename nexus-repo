node{
   stage('SCM Checkout'){
     git 'https://github.com/tarikgwa/appengine-websocketchat-java.git'
   }
   stage('Compile-Package'){
      // Get maven home path
      def mvnHome =  tool name: 'maven-3', type: 'maven'   
      sh "${mvnHome}/bin/mvn package"
   }
   
stage('Upload WAR Project to Nexus Artifact Repository ') {
    steps {
      nexusArtifactUploader {
        nexusVersion('nexus3')
        protocol('http')
        nexusUrl('172.17.0.4')
        groupId('com.google.appengine.demos')
        version('1.0')
        repository('websocketchat-release')
        credentialsId('nexus-3')
        artifact {
            artifactId('websocketchat')
            type('war')
            classifier('')
            file('target/websocketchat-1.0.war')
        }
        artifact {
            artifactId('websocketchat')
            type('war')
            classifier('')
            file('target/websocketchat-1.0.war')
        }
      }
    }
}

    }
